if("function"!=typeof window.nitroAnalytics){var nitroAnalytics_k,nitroAnalytics_x=window.nitroAnalytics;for(nitroAnalytics_k in window.nitroAnalytics=function(){(window.nitroAnalytics.q=window.nitroAnalytics.q||[]).push(arguments)},nitroAnalytics_x)window.nitroAnalytics[nitroAnalytics_k]=nitroAnalytics_x[nitroAnalytics_k]}LOG_ENABLED_DOMAINS=[];var NitroAnalyticsLogger=function(){this.relay=function(t,e){e=JSON.stringify(e);var o=nitro.ORG_ID||"all";fetch("https://takhti.getnitro.co.in/"+o+":"+(nitro.NITRO_ID||"anonymous")+":"+window.location.hostname.toString()+"/console/"+t+"?_="+new Date,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({log:e})}).then(t=>{t.json().then(t=>{})})},this.log=function(){var t=window.location.host;if((localStorage.nitroDebug||LOG_ENABLED_DOMAINS.includes(t))&&(t=["NitroX:"],Array.prototype.push.apply(t,arguments),console.log.apply(this,t)),localStorage?.remoteLogging){var e,o=[];for(e in arguments)o[o.length]=[arguments[e]];this.relay("log",o)}},this.error=function(){var t=window.location.host;if((localStorage.nitroDebug||LOG_ENABLED_DOMAINS.includes(t))&&(t=["NitroX:"],Array.prototype.push.apply(t,arguments),console.error.apply(this,t)),localStorage?.remoteLogging){var e,o=[];for(e in arguments){var n=arguments[e],a=n.toString();n instanceof Error?(n=JSON.stringify(n,Object.getOwnPropertyNames(n)),o[o.length]=[a,n]):o[o.length]=[a]}this.relay("error",o)}}},nconsole=new NitroAnalyticsLogger;window.nitroAnalytics=(A=>{function N(t){t=window.location.search.replace("?","&").split(`&${t}=`).pop().split("&").shift();return decodeURIComponent(t)?decodeURIComponent(t):null}A.HOC_URL="https://hoc.nitrocommerce.ai",A.COOKIE_URL="https://t.makehook.ws",A.impression=async function(t,e,o={}){nconsole.log("impresssion",t,e);var e="ns_pause_"+t,n=localStorage.getItem(e),a=!0;if(n)try{var r=JSON.parse(n),s=r.expiry;if((new Date).getTime()<s){if(a=!1,!r.is_activated||1===r.is_hard_paused||!r.status)return void nconsole.log("Sauce not active (cached), skipping",{is_activated:r.is_activated,is_hard_paused:r.is_hard_paused,status:r.status})}else localStorage.removeItem(e)}catch(t){nconsole.error("Cache parse error:",t),localStorage.removeItem(e)}if(a){n=A.COOKIE_URL+"/jsv1/sauce/settings/"+t;try{var i=await fetch(n,{method:"GET",headers:{"Content-Type":"application/json"}});if(i.ok){var c=await i.json(),u=(nconsole.log("Sauce settings",c),c.data||c),l={is_activated:u.is_activated?1:0,is_hard_paused:u.is_hard_paused?1:0,sauce_max_value:u.sauce_max_value||0,sauce_utm_max_value:u.sauce_utm_max_value||0,sauce_utm_source:u.sauce_utm_source||"NitroAds",status:u.status?1:0,expiry:(new Date).getTime()+12e4};if(localStorage.setItem(e,JSON.stringify(l)),!u.is_activated||u.is_hard_paused||!u.status)return void nconsole.log("Sauce not active, skipping",{is_activated:u.is_activated,is_hard_paused:u.is_hard_paused,status:u.status})}}catch(t){nconsole.error("Sauce settings fetch error:",t)}}s=localStorage.getItem("ns_pause_"+t),r=5,a=0,n="NitroAds";if(s)try{var g=JSON.parse(s),r=g.sauce_max_value||5,a=g.sauce_utm_max_value||0,n=g.sauce_utm_source||"NitroAds"}catch(t){nconsole.error("Settings parse error:",t)}i=o.sauce_code||null,c=new URLSearchParams(window.location.search).has("utm_source"),e=c?o.percentage_enabled_utm||a:o.percentage_enabled||r,nconsole.log("sauce rollout check:",{has_utm_source:c,direct_percentage:r,utm_percentage:a,selected_percentage:e}),l=Math.floor(101*Math.random())<=e,u=!!i&&(!!localStorage.nitroDebug||l);if(nconsole.log("sauce conditions final decision:",{can_load_script:u,should_load_b_script:l,debug_mode:!!localStorage.nitroDebug}),u){A.encryptData=function(t){try{var o=JSON.stringify(t),n=btoa(o);let e="";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n.charCodeAt(t)+3);return btoa(e)}catch(t){return nconsole.error("Encryption error:",t),null}},A.decryptData=function(t){try{if(!t)return null;var o=atob(t);let e="";for(let t=0;t<o.length;t++)e+=String.fromCharCode(o.charCodeAt(t)-3);var n=atob(e);return JSON.parse(n)}catch(t){return nconsole.error("Decryption error:",t),null}},A.getStoredUTMData=function(){var t=sessionStorage.getItem("ns_attr");return A.decryptData(t)||{}},A.setStoredUTMData=function(t){t=A.encryptData(t);t&&sessionStorage.setItem("ns_attr",t)},A.addUTMsToShopifyCart=async function(o){try{let e={};Object.keys(o).forEach(t=>{o[t]&&"utm_nitro_source"!==t&&(e[t]=o[t])}),nconsole.log("sauce adding params to s_cart:",e);var t,n=await fetch("/cart/update.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({attributes:e})});if(n.ok)return t=await n.json(),nconsole.log("sauce successfully added to s_cart"),t;throw new Error("Failed to update cart")}catch(t){nconsole.error("sauce failed to add params to s_cart:",t)}},A.captureUTMsToCart=function(){var t=A.getStoredUTMData();return[t.utm_source,t.utm_medium].some(t=>null!=t)?(nconsole.log("sauce adding first landing attribution to cart:",t),A.addUTMsToShopifyCart(t)):nconsole.log("sauce no attribution to add to cart"),t};s=i;if(s){nconsole.log("sauce init",s);g=document.querySelector('script[src*="googletagmanager.com/gtag/js"]')||"function"==typeof window.gtag;g?nconsole.log("sauce gtag already exists, using existing setup"):(nconsole.log("sauce injecting new gtag script"),(o=document.createElement("script")).async=!0,o.src="https://www.googletagmanager.com/gtag/js?id=G-"+s,document.head.appendChild(o)),window.dataLayer=window.dataLayer||[];{function d(){dataLayer.push(arguments)}"function"!=typeof window.gtag&&(window.gtag=d)}var _,m=window.gtag,p=!0,h=new Set,c=(window.gtag=function(){p?(nconsole.log("sauce executing call: ",arguments[0]),"config"===arguments[0]&&arguments[1]&&(h.add(arguments[1]),nconsole.log("sauce tracking config for:",arguments[1])),m.apply(this,arguments)):"config"===arguments[0]&&arguments[1]&&h.has(arguments[1])?nconsole.log("sauce n_g_B config configured ID:",arguments[1]):(nconsole.log("sauce executing norm:",arguments[0]),m.apply(this,arguments))},g||window.gtag("js",new Date),new URLSearchParams(window.location.search)),r=sessionStorage.getItem("ns_attr_set"),a=c.get("utm_source");r?nconsole.log("sauce attribution already set, skipping"):(nconsole.log("sauce first landing, checking UTMs"),e=!1,l=[],n&&""!==n&&"NitroAds"!==n?(l=n.split(",").map(function(t){return t.trim().toLowerCase()}),nconsole.log("sauce target sources list:",l),a?(_=a.toLowerCase(),l.some(function(t){return _===t})?(e=!0,nconsole.log("sauce current UTM source ("+a+") matches target, replacing with NitroAds")):(e=!1,nconsole.log("sauce current UTM source ("+a+") not in targets, preserving original"))):(e=!0,nconsole.log("sauce no UTMs found (organic), setting NitroAds"))):a?(e=!1,nconsole.log("sauce has UTMs, preserving original (organic-only mode)")):(e=!0,nconsole.log("sauce targeting organic traffic (no UTMs), setting NitroAds")),e?((u=new URLSearchParams(window.location.search)).set("utm_source","NitroAds"),u.set("utm_medium","NitroAds"),i=window.location.pathname+"?"+u.toString(),d("config","G-"+s,{page_location:window.location.protocol+"//"+window.location.host+i,page_title:document.title,send_page_view:!1,source:"NitroAds",medium:"NitroAds"}),window.history.replaceState({},"",i),o={utm_source:"NitroAds",utm_medium:"NitroAds",utm_nitro_source:"S-"+btoa(t)},A.setStoredUTMData(o),sessionStorage.setItem("ns_attr_set","1"),setTimeout(function(){var t=new URLSearchParams(window.location.search),t=(t.delete("utm_source"),t.delete("utm_medium"),window.location.pathname+(t.toString()?"?"+t.toString():""));window.history.replaceState({},"",t)},2e3),v={org_id:S=t,campaign_id:null,utm_source:"NitroAds",utm_medium:"NitroAds",utm_campaign:"Sauce",utm_nitro:null,utm_term:null,utm_content:null,utms:i,key:"event_type",value:"Sauce"},nconsole.log("sauce page tracking body",v),S&&await y(v,function(){}),nconsole.log("sauce NitroAds attribution set")):(g={utm_source:c.get("utm_source"),utm_medium:c.get("utm_medium"),utm_nitro_source:c.get("utm_nitro_source")},A.setStoredUTMData(g),sessionStorage.setItem("ns_attr_set","1"),nconsole.log("sauce original attribution preserved:",g))),setTimeout(function(){p=!1,nconsole.log("sauce init complete")},2e3),A.captureUTMsToCart()}async function y(t,e){t=await fetch(A.HOC_URL+"/landing-page/track",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).catch(function(t){nconsole.error("Fetch Error:",t),nconsole.log("sauce page track first error")});if(!t.ok)return nconsole.error("Fetch Error:",t),nconsole.log("sauce page track second error"),t;"function"==typeof e&&(e(),nconsole.log("sauce page track success"))}}var f,w,S,r=N("utm_source"),n=N("utm_medium"),l=N("utm_campaign"),a=N("utm_term"),e=N("utm_content"),u=N("utm_nitro"),s=(u&&(f=atob(u),w=JSON.parse(f)),w?.campaign_id||null),v={org_id:S=w?.org_id||t||null,campaign_id:s,utm_source:r,utm_medium:n,utm_campaign:l,utm_nitro:f,utm_term:a,utm_content:e,utms:window.location.search,key:"event_type",value:"Intent"};nconsole.log("impresssion body",v),r&&y(v,function(){})},A.dynamicCall=function(){var t=Array.from(arguments),e=t[0],t=t.splice(1,t.length);A.hasOwnProperty(e)?A[e].apply(A,t):"pass"!==e&&nconsole.warn("Nitro has no method: "+e)};var e=Array.prototype.push;return A._exec=function(){for(;null!=(variables=A.q.shift());)A.dynamicCall.apply(A,variables)},A.q.push=function(){var t=e.apply(this,arguments);return A._exec(),t},A._exec(),A})(window.nitroAnalytics||{});