;
(self.AMP=self.AMP||[]).push({m:0,v:"2510081644000",n:"amp-next-page",ev:"1.0",l:!0,f:function(t,n){!function(){function n(t,i){return(n=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,i)}function i(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&n(t,i)}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function u(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,e=r(t);if(n){var u=r(this).constructor;i=Reflect.construct(e,arguments,u)}else i=e.apply(this,arguments);return o(this,i)}}function s(t){return t?Array.prototype.slice.call(t):[]}var a=Array.isArray;function c(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,r=new Array(n);i<n;i++)r[i]=t[i];return r}var h=Object.prototype,f=h.hasOwnProperty,l=h.toString;function v(t){var n=Object.create(null);return t&&Object.assign(n,t),n}function p(t,n){return f.call(t,n)}function d(t,n){if("."==n)return t;for(var i,r=t,o=function(t,n){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(i)return(i=i.call(t)).next.bind(i);if(Array.isArray(t)||(i=function(t,n){if(t){if("string"==typeof t)return c(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?c(t,n):void 0}}(t))||t&&"number"==typeof t.length){i&&(t=i);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(n.split("."));!(i=o()).done;){var u=i.value;if(!(u&&r&&void 0!==r[u]&&"object"==e(r)&&p(r,u))){r=void 0;break}r=r[u]}return r}function m(t,n,i,r,e,o,u,s,a,c,h){return t}function g(t,n){try{return function(t){return JSON.parse(t)}(t)}catch(t){return null==n||n(t),null}}function b(t){return(t.ownerDocument||t).defaultView}var y,w=/(\0)|^(-)$|([\x01-\x1f\x7f]|^-?[0-9])|([\x80-\uffff0-9a-zA-Z_-]+)|[^]/g;function x(t,n,i,r,e){return e||(n?"ï¿½":r?t.slice(0,-1)+"\\"+t.slice(-1).charCodeAt(0).toString(16)+" ":"\\"+t)}function k(t){return void 0!==y?y:y=function(t){try{var n=t.ownerDocument,i=n.createElement("div"),r=n.createElement("div");return i.appendChild(r),i.querySelector(":scope div")===r}catch(t){return!1}}(t)}function R(t,n){return t.replace(/^|,/g,"$&".concat(n," "))}function S(t){return String(t).replace(w,x)}function j(t){m(/^[\w-]+$/.test(t))}function E(t,n){var i=t.classList,r="i-amphtml-scoped";i.add(r);var e=R(n,".".concat(r)),o=t.querySelectorAll(e);return i.remove(r),o}function O(t,n){if(k(t))return t.querySelector(R(n,":scope"));var i=E(t,n)[0];return void 0===i?null:i}function P(t,n){return j(n),O(t,"> [".concat(n,"]"))}function I(t,n){return j(n),i=t,r="> ".concat(n),k(i)?i.querySelectorAll(R(r,":scope")):E(i,r);var i,r}function N(t){var n;null===(n=t.parentElement)||void 0===n||n.removeChild(t)}function A(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function T(t,n){t.insertBefore(n,t.firstChild)}function L(t){if(Node.prototype.getRootNode)return t.getRootNode();var n,i;for(n=t;n.parentNode&&(!(i=n)||"I-AMPHTML-SHADOW-ROOT"!=i.tagName&&(11!=i.nodeType||"[object ShadowRoot]"!==Object.prototype.toString.call(i)));n=n.parentNode);return n}var C=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function M(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{return decodeURIComponent(t)}catch(t){return n}}function U(t){var n=(t||self).location;return function(t){var n,i=v();if(!t)return i;for(;n=C.exec(t);){var r=M(n[1],n[1]),e=n[2]?M(n[2].replace(/\+/g," "),n[2]):"";i[r]=e}return i}(n.originalHash||n.hash)}var z="";function $(t){var n;return z||(z=(null===(n=t.AMP_CONFIG)||void 0===n?void 0:n.v)||"01".concat("2510081644000")),z}function D(t,n){var i=n||U(t);return["1","actions","amp","amp4ads","amp4email"].includes(i.development)||!!t.AMP_DEV_MODE}function H(t){if(!t)return null;var n=t.match(/^(.*)\/(.*)-([0-9.]+|latest)(\.max)?\.(?:js|mjs)(?:\?ssr-css=[0|1])?$/i),i=n?n[2]:void 0,r=n?n[3]:void 0;return i&&r?{extensionId:i,extensionVersion:r}:null}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var _,V=self.__AMP_LOG;function Z(t,n){throw new Error("failed to call initLogConstructor")}function q(t){return V.user||(V.user=B()),function(t,n){return n&&n.ownerDocument.defaultView!=t}(V.user.win,t)?V.userForEmbed||(V.userForEmbed=B()):V.user}function B(t){return Z()}function J(){return V.dev||(V.dev=Z())}function W(t,n,i,r,e,o,u,s,a,c,h){return t}function Y(t,n,i,r,e,o,u,s,a,c,h){return q().assert(t,n,i,r,e,o,u,s,a,c,h)}function F(){return _||(_=Promise.resolve(void 0))}var K=function(){var t=this;this.promise=new Promise((function(n,i){t.resolve=n,t.reject=i}))};function G(t,n){return rt(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),n)}function Q(t,n){return rt(it(nt(t)),n)}function X(t,n){var i=it(nt(t));return at(i,n)?rt(i,n):null}function tt(t,n){return et(it(t),n)}function nt(t){return t.nodeType?(n=b(t),G(n,"ampdoc")).getAmpDoc(t):t;var n}function it(t){var n=nt(t);return n.isSingleDoc()?n.win:n}function rt(t,n){W(at(t,n));var i=ot(t)[n];return i.obj||(W(i.ctor),W(i.context),i.obj=new i.ctor(i.context),W(i.obj),i.context=null,i.resolve&&i.resolve(i.obj)),i.obj}function et(t,n){var i=ot(t)[n];return i?i.promise?i.promise:(rt(t,n),i.promise=Promise.resolve(i.obj)):null}function ot(t){var n=t.__AMP_SERVICES;return n||(n=t.__AMP_SERVICES={}),n}function ut(t){return"function"==typeof t.dispose}function st(t,n){if(ut(n))try{(function(t){return W(ut(t)),t})(n).dispose()}catch(n){J().error("SERVICE","failed to dispose service",t,n)}}function at(t,n){var i=t.__AMP_SERVICES&&t.__AMP_SERVICES[n];return!(!i||!i.ctor)}function ct(t,n,i,r){var e=tt(t,n);if(e)return e;var o=nt(t);return o.whenExtensionsKnown().then((function(){var t=o.getExtensionVersion(i);return t?G(o.win,"extensions").waitForExtension(i,t):null})).then((function(i){return i?r?tt(t,n):function(t,n){return function(t,n){var i=et(t,n);if(i)return i;var r,e,o,u,s=ot(t);return s[n]=(e=(r=new K).promise,o=r.reject,u=r.resolve,e.catch((function(){})),{obj:null,promise:e,resolve:u,reject:o,context:null,ctor:null}),s[n].promise}(it(t),n)}(t,n):null}))}var ht,ft,lt=function(t){return ct(t,"amp-analytics-instrumentation","amp-analytics")},vt=function(t){return G(t,"batched-xhr")},pt=function(t){return function(t,n,i){var r=X(t,n);return r?Promise.resolve(r):ct(t,n,"amp-bind")}(t,"bind")},dt=function(t){return Q(t,"mutator")},mt=function(t){return Q(t,"viewer")},gt=function(t){return G(t,"vsync")},bt=function(t){return Q(t,"viewport")},yt=function(t){return G(t,"xhr")},wt="prerender",xt="visible",kt="hidden";function Rt(t){var n=t.ownerDocument||t;return ht&&ht.ownerDocument===n||(ht=n.createElement("div")),St}function St(t){return function(t,n){if(m(1===n.length),m(Array.isArray(n)||p(n,"raw")),self.trustedTypes&&self.trustedTypes.createPolicy){var i=self.trustedTypes.createPolicy("static-template#createNode",{createHTML:function(t){return n[0]}});t.innerHTML=i.createHTML("ignored")}else t.innerHTML=n[0];var r=t.firstElementChild;return m(r),m(!r.nextElementSibling),t.removeChild(r),r}(ht,t)}var jt=["Webkit","webkit","Moz","moz","ms","O","o"];function Et(t,n,i,r,e){var o=function(t,n,i){if(n.startsWith("--"))return n;ft||(ft=v());var r=ft[n];if(!r||i){if(r=n,void 0===t[n]){var e=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(n),o=function(t,n){for(var i=0;i<jt.length;i++){var r=jt[i]+n;if(void 0!==t[r])return r}return""}(t,e);void 0!==t[o]&&(r=o)}i||(ft[n]=r)}return r}(t.style,n,e);if(o){var u,s=r?i+r:i;t.style.setProperty((u=o.replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()})),jt.some((function(t){return u.startsWith(t+"-")}))?"-".concat(u):u),s)}}function Ot(t,n){void 0===n&&(n=t.hasAttribute("hidden")),n?t.removeAttribute("hidden"):t.setAttribute("hidden","")}function Pt(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];lt(t).then((function(e){e&&e.triggerEventForTarget(t,n,i,r)}))}function It(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Nt(t,n,i){return n&&It(t.prototype,n),i&&It(t,i),t}var At="inside",Tt="top",Lt="bottom";function Ct(t,n){return!(!t||!n)&&t.left==n.left&&t.top==n.top&&t.width==n.width&&t.height==n.height}var Mt,Ut,zt=function(){function t(t,n,i,r){this.element=n,this.Ds=r,this.fidelity=i,this.turn=0==i?Math.floor(4*Math.random()):0,this.eF=null,this.Iu=bt(t)}var n=t.prototype;return n.Ns=function(t){var n=this.eF;if(!(n&&Ct(n.positionRect,t.positionRect)&&Ct(n.viewportRect,t.viewportRect))){W(t.positionRect);var i,r,e=t.positionRect;t.relativePos=(i=e,r=t.viewportRect,i.top<r.top?Tt:i.bottom>r.bottom?Lt:At),function(t,n){return t.top<=n.bottom&&n.top<=t.bottom&&t.left<=n.right&&n.left<=t.right}(e,t.viewportRect)?(this.eF=t,this.Ds(t)):this.eF&&(this.eF=null,t.positionRect=null,this.Ds(t))}},n.update=function(t){var n=this;if(!t){if(0!=this.turn)return void this.turn--;0==this.fidelity&&(this.turn=4)}var i,r,e=this.Iu.getSize(),o={left:0,top:0,width:i=e.width,height:r=e.height,bottom:0+r,right:0+i,x:0,y:0};this.Iu.getClientRectAsync(this.element).then((function(t){n.Ns({positionRect:t,viewportRect:o,relativePos:null})}))},t}(),$t=function(){function t(t){var n=this;this.Ki=t,this.t=t.win,this.aF=[],this.Su=gt(this.t),this.Iu=bt(t),this.Qy=[],this.sF=!1,this.uF=!1,this.oF=!1,this.fF=function(t,n,i){var r=0,e=0,o=null;function u(){r=0;var i,s=500-(t.Date.now()-e);s>0?r=t.setTimeout(u,s):(i=o,o=null,n.apply(null,i))}return function(){e=t.Date.now();for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];o=i,r||(r=t.setTimeout(u,500))}}(this.t,(function(){n.sF=!1}))}var n=t.prototype;return n.observe=function(t,n,i){var r=this,e=new zt(this.Ki,t,n,i);return this.aF.push(e),this.oF||this.cF(),e.update(),function(){for(var t=0;t<r.aF.length;t++)if(r.aF[t]==e)return void r.hF(t)}},n.unobserve=function(t){for(var n=0;n<this.aF.length;n++)if(this.aF[n].element==t)return void this.hF(n);J().error("POSITION_OBSERVER","cannot unobserve unobserved element")},n.hF=function(t){this.aF.splice(t,1),0==this.aF.length&&this.lF()},n.cF=function(){var t=this;this.oF=!0,this.Qy.push(this.Iu.onScroll((function(){t.vF()}))),this.Qy.push(this.Iu.onResize((function(){t.dF()})))},n.lF=function(){for(this.oF=!1;this.Qy.length;)this.Qy.pop()()},n.updateAllEntries=function(t){for(var n=0;n<this.aF.length;n++)this.aF[n].update(t)},n.vF=function(){this.fF(),this.sF=!0,this.uF||this.pF()},n.dF=function(){this.updateAllEntries(!0)},n.pF=function(){var t=this;this.updateAllEntries(),this.uF=!0,this.sF?this.Su.measure((function(){t.pF()})):this.uF=!1},t}(),Dt=function(){function t(t,n){this.Yi=t,this.kst=null,this.jst=null,this.callback=n}var n=t.prototype;return n.observe=function(t,n){var i=this,r=t.ownerDocument.createElement("div");r.classList.add("i-amphtml-next-page-document-top-sentinel");var e=t.ownerDocument.createElement("div");e.classList.add("i-amphtml-next-page-document-bottom-sentinel"),n.insertBefore(r,t),n.insertBefore(e,t.nextSibling),this.Yi.getPositionObserver().observe(r,0,(function(t){return i.Pst(t)})),this.Yi.getPositionObserver().observe(e,0,(function(t){return i.Ist(t)}))},n.Pst=function(t){this.kst=t.relativePos,this.Yi.updateRelativePos(this)},n.Ist=function(t){this.jst=t.relativePos,this.Yi.updateRelativePos(this)},n.usesSentinel=function(){return!0},Nt(t,[{key:"top",get:function(){return this.kst}},{key:"bottom",get:function(){return this.jst}}]),t}(),Ht=function(t){i(r,t);var n=u(r);function r(t,i,r){var e;return(e=n.call(this,t,i)).Nst=r,e}return r.prototype.usesSentinel=function(){return!1},Nt(r,[{key:"nextPageEl",get:function(){return this.Nst}}]),r}(Dt),_t=function(){function t(t){this.Ki=t,this.uy=[],this.yF=0,this.a6=-1,this.Ast=null,this.Iu=bt(t),this.Tst=0,this.Lst=!1,this.Ea=dt(t);var n=function(t,n,i){var r=0,e=null;function o(i){e=null,r=t.setTimeout(u,200),n.apply(null,i)}function u(){r=0,e&&o(e)}return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];r?e=n:o(n)}}(t.win,this.l6.bind(this));this.Iu.onScroll(n.bind(this)),this.Iu.onResize(n.bind(this)),this.l6()}var n=t.prototype;return n.l6=function(){var t=this;this.Lst||(this.Lst=!0,this.Ea.measureElement((function(){t.Tst=t.Iu.getHeight();var n=t.Iu.getScrollTop(),i=n-t.yF;if(!(Math.abs(i)<20)){var r=i>0?-1:1;t.uy.forEach((function(n){n.usesSentinel()&&t.Ast===r||t.updateRelativePos(n)})),t.yF=n,t.Ast=t.a6,t.a6=r}})).then((function(){t.Lst=!1})))},n.isScrollingUp=function(){return 1===this.a6},n.isScrollingDown=function(){return-1===this.a6},n.observe=function(t,n,i){var r=new Dt(this,i);this.uy.push(r),r.observe(t,n)},n.observeHost=function(t,n){var i=new Ht(this,n,t);this.uy.push(i)},n.getPositionObserver=function(){return t=this.Ki,n="position-observer",i=$t,function(t,n,i,r,e,o){var u=ot(t),s=u[i];s||(s=u[i]={obj:null,promise:null,resolve:null,reject:null,context:null,ctor:null,sharedInstance:!1}),s.ctor||(s.ctor=r,s.context=n,s.sharedInstance=!1,s.resolve&&rt(t,i))}(it(r=nt(t)),r,n,i),Q(this.Ki.getHeadNode(),"position-observer");var t,n,i,r},n.updateRelativePos=function(t){var n=t.usesSentinel()?this.getRelativePosFromSentinel(t):this.getRelativePosFromScroll(t);n&&t.callback(W(n))},n.getRelativePosFromScroll=function(t){var n=this.yF,i=this.Tst,r=t.nextPageEl.getLayoutBox().top;return n<r-i?5:n<r&&r<=i&&n<=0?1:n<r?this.isScrollingDown()?3:4:2},n.getRelativePosFromSentinel=function(t){var n=t.bottom,i=t.top;return i||n?i===At&&n===At?1:i&&i!==Tt||n&&n!==Lt?(i&&i!==Tt||n!==Tt)&&(i!==Lt||n&&n!==Lt)?!(i!==Tt&&i!==At||n&&n!==Lt)==!!this.isScrollingUp()?3:4:2:5:null},Nt(t,[{key:"mutator",get:function(){return this.Ea}}]),t}(),Vt="amp-next-page-hidden",Zt=function(){function t(t,n){this.qy=t,this.mz=n.title,this.pi=n.url,this.Cst=n.url,this.MQ=n.image,this.Mst=null,this.$w=null,this.AY=null,this.Ri=1,this.J=wt,this.Ust=2}var n=t.prototype;return n.is=function(t){return this.Ri===t},n.isLoaded=function(){return 3===this.Ri||5===this.Ri||6===this.Ri},n.isVisible=function(){return this.isLoaded()&&this.J===xt},n.setVisibility=function(t){this.isLoaded()&&t!=this.J&&(this.is(6)&&t===xt&&this.resume(),this.J=t,this.Mst&&(this.Mst.setVisibilityState(t),this.Mst.ampdoc.getBody().classList.toggle("amp-next-page-visible",this.isVisible()),this.Mst.ampdoc.getBody().classList.toggle(Vt,!this.isVisible())))},n.pause=function(){var t=this;return this.Mst?this.Mst.close().then((function(){return t.qy.closeDocument(t).then((function(){t.Mst=null,t.J=kt,t.Ri=6}))})):F()},n.resume=function(){return this.zst()},n.fetch=function(){var t=this;return 5===this.Ri||2===this.Ri||3===this.Ri||4===this.Ri?F():(this.Ri=2,this.qy.fetchPageDocument(this).then((function(n){return t.Ri=3,t.AY=n,t.$w=t.qy.createDocumentContainerForPage(t),t.zst()})).catch((function(){t.Ri=4})))},n.zst=function(){var t=this;return this.qy.attachDocumentToPage(this,W(this.AY),this.is(6)).then((function(n){n?(t.Ri=5,t.Mst=n,t.is(6)||t.qy.setLastFetchedPage(t)):t.Ri=4}))},Nt(t,[{key:"url",get:function(){return this.pi},set:function(t){this.pi=t}},{key:"initialUrl",get:function(){return this.Cst}},{key:"image",get:function(){return this.MQ}},{key:"title",get:function(){return this.mz}},{key:"relativePos",get:function(){return this.Ust},set:function(t){this.Ust=t}},{key:"document",get:function(){if(this.Mst)return this.Mst.ampdoc.getRootNode()}},{key:"container",get:function(){return this.$w}},{key:"shadowDoc",get:function(){return this.Mst}}]),t}(),qt=function(t){i(r,t);var n=u(r);function r(t,i,r,e,o){var u;return(u=n.call(this,t,i)).Ri=r,u.J=e,u.Yl=o,u}return Nt(r,[{key:"document",get:function(){return this.Yl}}]),r}(Zt),Bt=function(){function t(t){this.St=t,this.Et=0,this.Rt=0,this.xt=v()}var n=t.prototype;return n.has=function(t){return!!this.xt[t]},n.get=function(t){var n=this.xt[t];if(n)return n.access=++this.Rt,n.payload},n.put=function(t,n){this.has(t)||this.Et++,this.xt[t]={payload:n,access:this.Rt},this.Tt()},n.Tt=function(){if(!(this.Et<=this.St)){var t,n=this.xt,i=this.Rt+1;for(var r in n){var e=n[r].access;e<i&&(i=e,t=r)}void 0!==t&&(delete n[t],this.Et--)}},t}(),Jt=function(){return self.AMP.config.urls}(),Wt=new Set(["c","v","a","ad"]),Yt=function(t){return"string"==typeof t?Ft(t):t};function Ft(t,n){return Mt||(Mt=self.document.createElement("a"),Ut=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new Bt(100))),function(t,n,i){if(i&&i.has(n))return i.get(n);t.href=n,t.protocol||(t.href=t.href);var r,e={href:t.href,protocol:t.protocol,host:t.host,hostname:t.hostname,port:"0"==t.port?"":t.port,pathname:t.pathname,search:t.search,hash:t.hash,origin:null};"/"!==e.pathname[0]&&(e.pathname="/"+e.pathname),("http:"==e.protocol&&80==e.port||"https:"==e.protocol&&443==e.port)&&(e.port="",e.host=e.hostname),r=t.origin&&"null"!=t.origin?t.origin:"data:"!=e.protocol&&e.host?e.protocol+"//"+e.host:e.href,e.origin=r;var o=e;return i&&i.put(n,o),o}(Mt,t,n?null:Ut)}function Kt(t){return"https:"==(t=Yt(t)).protocol||"localhost"==t.hostname||"127.0.0.1"==t.hostname||(i=".localhost",(r=(n=t.hostname).length-i.length)>=0&&n.indexOf(i,r)==r);var n,i,r}function Gt(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"source";return Y(null!=t,"%s %s must be available",n,i),Y(Kt(t)||/^\/\//.test(t),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',n,i,t),t}function Qt(t){if(!function(t){return Jt.cdnProxyRegex.test(Yt(t).origin)}(t=Yt(t)))return t.href;var n=t.pathname.split("/"),i=n[1];Y(Wt.has(i),"Unknown path prefix in url %s",t.href);var r=n[2],e="s"==r?"https://"+decodeURIComponent(n[3]):"http://"+decodeURIComponent(r);return Y(e.indexOf(".")>0,"Expected a . in origin %s",e),n.splice(1,"s"==r?3:2),e+n.join("/")+function(t,n){if(!t||"?"==t)return"";var i=new RegExp("[?&]".concat("(amp_(js[^&=]*|gsa|r|kit)|usqp)","\\b[^&]*"),"g"),r=t.replace(i,"").replace(/^[?&]/,"");return r?"?"+r:""}(t.search)+(t.hash||"")}function Xt(t){return Ft(Qt(t)).origin}function tn(t,n){var i=Ft(t),r=Ft(n).origin,e=Xt(n);return Y(i.origin===r||i.origin===e,"Invalid page URL supplied to amp-next-page, pages must be from the same origin as the current document"),i}var nn='.i-amphtml-next-page-document{overflow:hidden}.i-amphtml-next-page-document:not(.amp-next-page-visible) [i-amphtml-fixedid]{display:none}.i-amphtml-next-page-document.amp-next-page-visible{opacity:1;overflow:visible}.i-amphtml-next-page-document:after,.i-amphtml-next-page-document:before{content:" ";display:table}.i-amphtml-next-page-placeholder{background:#eee}.amp-next-page-separator{border-bottom:1px solid rgba(0,0,0,.12)}.amp-next-page-links{border-top:1px solid rgba(0,0,0,.1);margin-top:16px;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.amp-next-page-link{border-bottom:1px solid rgba(0,0,0,.1);display:block;overflow:auto;padding:10px 0;text-decoration:none}.amp-next-page-image{width:72px;height:72px;float:left;margin:0 10px;background-size:cover;background-position:50%}.amp-next-page-text{position:relative;margin:5px 30px 5px 0;color:#3c4043;font-size:17px}\n/*# sourceURL=/extensions/amp-next-page/1.0/amp-next-page.css*/';function rn(t,n,i,r){var e=function(t){return X(t,"url-replace")}(t);return(i>=1?e.expandUrlAsync(n):Promise.resolve(n)).then((function(n){if(1===i){var o=e.collectDisallowedVarsSync(t);if(o.length>0)throw q().createError("URL variable substitutions in CORS fetches from dynamic URLs (e.g. via amp-bind) require opt-in. "+'Please add data-amp-replace="'.concat(o.join(" "),'" to the ')+"<".concat(t.tagName,"> element. See https://bit.ly/amp-var-subs."))}var u={};return t.hasAttribute("credentials")&&(u.credentials=t.getAttribute("credentials")),r&&(u.cache="reload"),{"xhrUrl":n,"fetchOpt":u}}))}var en,on,un="render-start",sn="none",an="v0";function cn(){if(void 0!==on)return on;if(hn()==sn)on=!1;else{var t=hn()===an?self.document.createElement("div").createShadowRoot():self.document.createElement("div").attachShadow({mode:"open"});n=ShadowRoot,on=!!n&&-1!=n.toString().indexOf("[native code]")&&t instanceof ShadowRoot}var n;return on}function hn(t){return void 0===en&&(n=t||Element,en=n.prototype.attachShadow?"v1":n.prototype.createShadowRoot?an:sn),en;var n}function fn(t,n,i){var r="";return t&&Array.prototype.forEach.call(t,(function(t){if(t.selectorText&&t.style&&void 0!==t.style.cssText)r+=function(t,n,i){var r=[];return t.split(",").forEach((function(t){t=t.trim(),i&&(t=i(t)),function(t,n){var i=function(t){return t=t.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),new RegExp("^("+t+")"+pn,"m")}(n);return!t.match(i)}(t,n)&&(t=function(t,n){return function(t,n){return t.match(mn)?(t=t.replace(dn,n)).replace(mn,n+" "):n+" "+t}(t,n)}(t,n)),r.push(t)})),r.join(", ")}(t.selectorText,n,i)+" {\n\t",r+=function(t){var n=t.style.cssText;t.style.content&&!t.style.content.match(/['"]+|attr/)&&(n=n.replace(/content:[^;]*;/g,"content: '"+t.style.content+"';"));var i=t.style;for(var r in i)"initial"===i[r]&&(n+=r+": initial; ");return n}(t)+"\n}\n\n";else if(t.type===CSSRule.MEDIA_RULE)r+="@media "+t.media.mediaText+" {\n",r+=fn(t.cssRules,n),r+="\n}\n\n";else try{t.cssText&&(r+=t.cssText+"\n\n")}catch(t){}})),r}var ln="-shadowcsshost",vn=")(?:\\(((?:\\([^)(]*\\)|[^)(]*)+?)\\))?([^,{]*)",pn=(new RegExp("("+ln+vn,"gim"),new RegExp("(-shadowcsscontext"+vn,"gim"),"([>\\s~+[.,{:][\\s\\S]*)?$"),dn=ln+"-no-combinator",mn=new RegExp(ln,"gim");function gn(t,n,i,r,e){var o=t.getHeadNode(),u=function(t,n,i,r){var e=t.__AMP_CSS_SM;e||(e=t.__AMP_CSS_SM=v());var o=!i&&r&&"amp-custom"!=r&&"amp-keyframes"!=r,u=i?"amp-runtime":o?"amp-extension=".concat(r):null;if(u){var s=bn(t,e,u);if(s)return"STYLE"==s.tagName&&s.textContent!==n&&(s.textContent=n),s}var a=(t.ownerDocument||t).createElement("style");a.textContent=n;var c=null;return i?a.setAttribute("amp-runtime",""):o?(a.setAttribute("amp-extension",r||""),c=bn(t,e,"amp-runtime")):(r&&a.setAttribute(r,""),c=t.lastChild),function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(i){var r=i.nextSibling;t.insertBefore(n,r)}else T(t,n)}(t,a,c),u&&(e[u]=a),a}(o,function(t,n){var i=t.__AMP_CSS_TR;return i?i(n):n}(o,n),r||!1,e||null);if(i){var s=t.getRootNode();if(yn(s,u))return i(u),u;var a=setInterval((function(){yn(s,u)&&(clearInterval(a),i(u))}),4)}return u}function bn(t,n,i){if(n[i])return n[i];var r=t.querySelector("style[".concat(i,"], link[").concat(i,"]"));return r?(n[i]=r,r):null}function yn(t,n){for(var i=t.styleSheets,r=0;r<i.length;r++)if(i[r].ownerNode==n)return!0;return!1}new RegExp("-shadowcsscontext","gim");var wn=function(){function t(t){this.mv=t.document.implementation.createHTMLDocument(""),this.mv.open(),this.Su=gt(t),this.pv=this.bv.bind(this),this.gv=null,this.yv=null,this.wv=null,this.Av=!1,this.xv=F(),this.Ev=!1,this.Ov=null}var n=t.prototype;return n.onBody=function(t){this.gv=t},n.onBodyChunk=function(t){this.yv=t},n.onEnd=function(t){this.wv=t},n.write=function(t){if(this.Ev)throw new Error("closed already");return t&&this.mv.write(t),this.Ee(),this.xv},n.close=function(){return this.mv.close(),this.Ev=!0,this.Ee(),this.xv},n.abort=function(t){throw new Error("Not implemented")},n.releaseLock=function(){throw new Error("Not implemented")},n.Ee=function(){m(this.gv&&this.yv&&this.wv),this.Av||(this.Av=!0,this.Su.mutate(this.pv))},n.bv=function(){if(this.Av=!1,!this.Ov&&this.mv.body&&(this.Ov=this.gv(this.mv)),this.Ov){var t=this.mv.body,n=m(this.Ov),i=0;for(kn(t);t.firstChild;)i++,n.appendChild(t.firstChild);i>0&&this.yv()}this.Ev&&this.wv()},Nt(t,[{key:"closed",get:function(){throw new Error("Not implemented")}},{key:"desiredSize",get:function(){throw new Error("Not implemented")}},{key:"ready",get:function(){throw new Error("Not implemented")}}]),t}(),xn=function(){function t(t){this.Tv=[],this.Su=gt(t),this.gv=null,this.yv=null,this.wv=null,this.xv=F(),this.Ev=!1}var n=t.prototype;return n.onBody=function(t){this.gv=t},n.onBodyChunk=function(t){this.yv=t},n.onEnd=function(t){this.wv=t},n.write=function(t){if(m(this.gv&&this.yv&&this.wv),this.Ev)throw new Error("closed already");return t&&this.Tv.push(t),this.xv},n.close=function(){var t=this;return m(this.gv&&this.yv&&this.wv),this.Ev=!0,this.Su.mutate((function(){return t.Sf()})),this.xv},n.abort=function(t){throw new Error("Not implemented")},n.releaseLock=function(){throw new Error("Not implemented")},n.Sf=function(){var t=this.Tv.join(""),n=(new DOMParser).parseFromString(t,"text/html");if(n.body){var i=n.body,r=this.gv(n),e=0;for(kn(i);i.firstChild;)e++,r.appendChild(i.firstChild);e>0&&this.yv()}this.wv()},Nt(t,[{key:"closed",get:function(){throw new Error("Not implemented")}},{key:"desiredSize",get:function(){throw new Error("Not implemented")}},{key:"ready",get:function(){throw new Error("Not implemented")}}]),t}();function kn(t){I(t,"noscript").forEach(N)}var Rn,Sn=/[^\.\-\_0-9a-zA-Z]/,jn=/[^\-\_0-9a-zA-Z]/;function En(t,n,i){var r,e,o=t.ownerDocument;if(cn())r=o.importNode(n,i);else{"block",e=(r=o.createElement("amp-body")).style,m(!0),m(!e.display),e.display="block";for(var u=0;u<n.attributes.length;u++)r.setAttribute(n.attributes[0].name,n.attributes[0].value);if(i)for(var s=n.firstChild;s;s=s.nextSibling)r.appendChild(o.importNode(s,!0))}Et(r,"position","relative");var a=t.body;return a&&t.removeChild(a),t.appendChild(r),Object.defineProperty(t,"body",{configurable:!0,value:r}),r}function On(t){return t.replace(/(html|body)/g,Pn)}function Pn(t,n,i,r){var e=r.charAt(i-1),o=r.charAt(i+t.length);return e&&!Sn.test(e)||o&&!jn.test(o)?t:"amp-"+t}function In(t,n){var i=t.createElement("style");i.textContent=n;try{return(t.head||t.documentElement).appendChild(i),i.sheet?i.sheet.cssRules:null}finally{i.parentNode&&i.parentNode.removeChild(i)}}var Nn="multidoc-manager",An=function(){function n(t,n,i,r){this.win=t,this.pl=n,this.rv=i,this.js=r,this.Pv=[]}var i=n.prototype;return i.Iv=function(n,i,r,e){var o=this;r=r||Object.create(null),this.Sv(),Et(n,"visibility","hidden");var u=function(t){var n,i=b(t),r=t.shadowRoot||t.__AMP_SHADOW_ROOT;if(r){if(self.trustedTypes&&self.trustedTypes.createPolicy){var e=self.trustedTypes.createPolicy("shadow-embed#createShadowRoot",{createHTML:function(t){return""}});r.innerHTML=e.createHTML("")}else r.innerHTML="";return r}var o,u=hn();if("v1"==u?(n=t.attachShadow({mode:"open"})).styleSheets||Object.defineProperty(n,"styleSheets",{get:function(){var t=[];return n.childNodes.forEach((function(n){"STYLE"===n.tagName&&t.push(n.sheet)})),t}}):n=u==an?t.createShadowRoot():function(t){var n=t.ownerDocument;t.classList.add("i-amphtml-shadow-host-polyfill");var i=n.createElement("style");i.textContent=".i-amphtml-shadow-host-polyfill>:not(i-amphtml-shadow-root){display:none!important}",t.appendChild(i);var r=n.createElement("i-amphtml-shadow-root");return t.appendChild(r),t.__AMP_SHADOW_ROOT=r,Object.defineProperty(t,"shadowRoot",{enumerable:!0,configurable:!0,value:r}),r.host=t,r.getElementById=function(t){var n=S(t);return r.querySelector("#".concat(n))},Object.defineProperty(r,"styleSheets",{get:function(){return n.styleSheets?s(n.styleSheets).filter((function(t){return r.contains(t.ownerNode)})):[]}}),r}(t),!cn()){var a="i-amphtml-sd-".concat(i.Math.floor(1e4*i.Math.random()));n.id=a,n.host.classList.add(a),o=function(t){return function(t,n){return function(t,n){var i=W(t.id),r=t.ownerDocument,e=null;try{e=In(r.implementation.createHTMLDocument(""),n)}catch(t){}if(!e)try{e=In(r,n)}catch(t){}return e?fn(e,".".concat(i),On):n}(t,n)}(n,t)},n.__AMP_CSS_TR=o}return n}(n);u.AMP&&(q().warn(Nn,"Shadow doc wasn't previously closed"),this.Mv(u));var c={};u.AMP=c,c.url=i;var h=Ft(i).origin,f=this.pl.installShadowDoc(i,u,{params:r});c.ampdoc=f,J().fine(Nn,"Attach to shadow root:",u,f),gn(f,t.combinedCss,null,!0),t.installAmpdocServices(f);var v,p,d=mt(f);return c.setVisibilityState=function(t){f.overrideVisibilityState(t)},c.postMessage=d.receiveMessage.bind(d),c.onMessage=function(t){v=t},d.setMessageDeliverer((function(t,n,i){var r;return"broadcast"==t?(o.Rv(n,u),i?F():void 0):null===(r=v)||void 0===r?void 0:r(t,n,i)}),h),c.close=function(){return o.Mv(u)},(p=self,p.__AMP_MODE?p.__AMP_MODE:p.__AMP_MODE=function(t){return{localDev:!1,development:D(t,U(t)),esm:!1,test:!1,rtvVersion:$(t),ssrReady:!1}}(p)).development&&(c.toggleRuntime=d.toggleRuntime.bind(d),c.resources=Q(f,"resources")),c.getState=function(t){return pt(u).then((function(n){return n?n.getState(t):Promise.reject("amp-bind is not available in this document")}))},c.setState=function(t){return pt(u).then((function(n){return n?"string"==typeof t?n.setStateWithExpression(t,{}):(i=t,"[object Object]"===l.call(i)||a(t)?n.setStateWithObject(t):Promise.reject("Invalid state")):Promise.reject("amp-bind is not available in this document");var i}))},e(c,u,f).then((function(){f.setReady(),f.signals().signal(un),Et(n,"visibility","visible")})),this.Pv.includes(u)||this.Pv.push(u),J().fine(Nn,"Shadow root initialization is done:",u,f),c},i.attachShadowDoc=function(t,n,i,r){var e=this;return q().assertString(i),J().fine(Nn,"Attach shadow doc:",n),this.Iv(t,i,r,(function(i,r,o){if(e._v(o,r,n),n.body){var u=En(r,n.body,!0);u.classList.add("amp-shadow"),o.setBody(u)}return setTimeout((function(){o.signals().signal(un),Et(t,"visibility","visible")}),50),F()}))},i.attachShadowDocAsStream=function(t,n,i){var r=this;return q().assertString(n),J().fine(Nn,"Attach shadow doc as stream"),this.Iv(t,n,i,(function(n,i,e){var o,u=!1,s=function(t){return void 0===Rn&&(Rn=function(t){return!(!t.document.implementation||"function"!=typeof t.document.implementation.createHTMLDocument||(n=t,G(n,"platform")).isFirefox());var n}(t)),Rn}(o=r.win)?new wn(o):new xn(o);return n.writer=s,s.onBody((function(t){r._v(e,i,t);var n=En(i,t.body,!1);return n.classList.add("amp-shadow"),e.setBody(n),n})),s.onBodyChunk((function(){u||(u=!0,setTimeout((function(){e.signals().signal(un),Et(t,"visibility","visible")}),50))})),new Promise((function(t){s.onEnd((function(){t(),n.writer=null}))}))}))},i._v=function(t,n,i){if(i.head){n.AMP.head=i.head;for(var r={},e=I(this.win.document.head,"link"),o=0;o<e.length;o++){var u=e[o].getAttribute("href");u&&(r[u]=!0)}for(var s=i.head.firstElementChild;s;s=s.nextElementSibling){var a=s.tagName,c=s.getAttribute("name"),h=s.getAttribute("rel");switch(a){case"TITLE":n.AMP.title=s.textContent,J().fine(Nn,"- set title: ",n.AMP.title);break;case"META":s.hasAttribute("charset")||"viewport"==c||(c?t.setMetaByName(c,s.getAttribute("content")||""):J().warn(Nn,"meta ignored: ",s));break;case"LINK":var f=s.getAttribute("href");if("canonical"==h)n.AMP.canonicalUrl=f,J().fine(Nn,"- set canonical: ",n.AMP.canonicalUrl);else if("stylesheet"==h)if(r[f])J().fine(Nn,"- stylesheet already included: ",f),gn(t,'@import "'.concat(f,'"'),null,!1);else{r[f]=!0;var l=this.win.document.createElement("link");l.setAttribute("rel","stylesheet"),l.setAttribute("type","text/css"),l.setAttribute("href",f),this.win.document.head.appendChild(l),J().fine(Nn,"- import font to parent: ",f,l)}else J().fine(Nn,"- ignore link rel=",h);break;case"STYLE":s.hasAttribute("amp-boilerplate")?J().fine(Nn,"- ignore boilerplate style: ",s):s.hasAttribute("amp-custom")?(gn(t,s.textContent,null,!1,"amp-custom"),J().fine(Nn,"- import style: ",s)):s.hasAttribute("amp-keyframes")&&(gn(t,s.textContent,null,!1,"amp-keyframes"),J().fine(Nn,"- import style: ",s));break;case"SCRIPT":if(s.hasAttribute("src")){J().fine(Nn,"- src script: ",s);var v=s.getAttribute("src"),p=H(v),d=s.getAttribute("custom-element"),m=s.getAttribute("custom-template"),g=d||m;p?g?this.rv.installExtensionForDoc(t,g,p.extensionVersion):s.hasAttribute("data-amp-report-test")||q().error(Nn,"- unknown script: ",s,v):J().fine(Nn,"- ignore runtime script: ",v)}else-1==(s.getAttribute("type")||"application/javascript").indexOf("javascript")?(n.appendChild(this.win.document.importNode(s,!0)),J().fine(Nn,"- non-src script: ",s)):s.hasAttribute("amp-onerror")||q().error(Nn,"- unallowed inline javascript: ",s);break;case"NOSCRIPT":break;default:q().error(Nn,"- UNKNOWN head element:",s)}}}t.setExtensionsKnown()},i.Rv=function(t,n){var i=this;this.Sv(),this.Pv.forEach((function(r){if(r!=n){var e=mt(r.AMP.ampdoc);i.js.delay((function(){e.receiveMessage("broadcast",t,!1)}),0)}}))},i.Mv=function(t){this.kv(t);var n=t.AMP;delete t.AMP;var i=n.ampdoc;return i.overrideVisibilityState("inactive"),function(t){!function(t){var n=ot(t),i=function(t){if(!Object.prototype.hasOwnProperty.call(n,t))return"continue";var i=n[t];if(i.sharedInstance)return"continue";i.obj?st(t,i.obj):i.promise&&i.promise.then((function(n){return st(t,n)}))};for(var r in n)i(r)}(t)}(i),this.js.timeoutPromise(15,new this.win.Promise((function(t){tt(i,"resources").then((function(n){n?n.onNextPass(t):t()}))})),"Timeout reached waiting for visibility state change callback").catch((function(t){q().info(Nn,t)}))},i.kv=function(t){var n=this.Pv.indexOf(t);-1!=n&&this.Pv.splice(n,1)},i.Nv=function(t){var n=this;this.js.delay((function(){n.Mv(t)}),0)},i.Sv=function(){var t=this;this.Pv.forEach((function(n){n.host&&function(t){var n=t.isConnected;if(void 0!==n)return n;for(var i=t;(i=L(i)).host;)i=i.host;return i.nodeType===Node.DOCUMENT_NODE}(n.host)||(q().warn(Nn,"Shadow doc wasn't previously closed"),t.kv(n),t.Nv(n))}))},n}(),Tn=['<div class=amp-next-page-separator aria-label="Next article separator" tabindex=0></div>'],Ln=['<div class=amp-next-page-links aria-label="Read more articles"></div>'],Cn=["<a class=amp-next-page-link><img ref=image class=amp-next-page-image> <span ref=title class=amp-next-page-text></span></a>"],Mn="amp-next-page",Un="i-amphtml-next-page-document",zn="i-amphtml-next-page-shadow-root",$n="i-amphtml-next-page-placeholder",Dn=function(){return F()},Hn=function(){function t(t){var n=this;this.Ki=t,this.t=t.win,this.tp=this.t.document,this.Iu=bt(t),this.fo=mt(t),this.Ea=dt(t),this.tS=Q(t,"templates"),this.$at=null,this.$st=null,this.Dst=Dn,this.Hst=!1,this._st=null,this.Vst=null,this.Zst=null,this.Gat=null,this.xu=null,this._R=null,this.SI,this.qst=null,this.Bst=null,this.Jst=null,this.Wst={},this.Yst=!1,this.Fst=1/0,this.Kst=null,this.Ai=null,this.mi=new Promise((function(t){n.Ai=t}))}var n=t.prototype;return n.isBuilt=function(){return!!this.SI},n.build=function(t){var n=this;if(this.isBuilt())return F();this.Ki.getBody().lastElementChild!==t&&q().warn(Mn,"should be the last element in the body of the document, a footer element can be added as a child of <amp-next-page> if it has the `footer` attribute"),this.Vst=t,this.Kst=this.Gst().getAttribute("src"),this.Yst=this.Gst().hasAttribute("deep-parsing")?"false"!==this.Gst().getAttribute("deep-parsing"):!this.Kst,this.Fst=this.Gst().hasAttribute("max-pages")?parseInt(this.Gst().getAttribute("max-pages"),10):1/0,this.$at=this.Qst(t),this.$st=this.Xst(t),this.Bst=this.createHostPage(),this.Jst=this.Bst,this.toggleHiddenAndReplaceableElements(this.tp),T(this.Vst,this.$st),this.xu=Q(this.Ki,"history"),this._R=Q(this.Ki,"navigation"),this.Gat=new An(this.t,G(this.t,"ampdoc"),function(t){return G(t,"extensions")}(this.t),rt(this.t,"timer")),this.Zst=new _t(this.Ki),this.mi.then((function(){n.Zst.observeHost(n.Gst(),(function(t){n.Bst.relativePos=t,n.updateVisibility()}))})),this.SI||(this.SI=[this.Bst],this.setLastFetchedPage(this.Bst));var i=function(){n.Dst(),n.Ai()};return this.tct().then((function(){return n.nct()})).then(i,i),this.Gst().classList.add("i-amphtml-next-page"),this.mi},n.tct=function(){var t=this;return new Promise((function(n){if(0!=t.Iu.getScrollTop())return n();var i=t.Iu.onScroll((function(){n(),i()}))}))},n.Gst=function(){return this.Vst},n.maybeFetchNext=function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.SI.filter((function(t){return!t.is(1)})).length>this.Fst,r=this.SI.some((function(t){return t.is(2)})),e=this.ict()>3&&!n;if(this.Hst||r||e||i)return F();var o=this.SI.length,u=this.SI[this.rct(this.qst)+1];return u?u.fetch().then((function(){u.is(4)&&t.setLastFetchedPage(u)})).then((function(){return t.Dst()}),(function(n){return t.Dst().then((function(){throw n}))})):this.ect().then((function(n){return t.oct(n)})).then((function(){return t.SI.length<=o?(t.Hst=!0,t.Dst()):t.maybeFetchNext(!0)}))},n.updateVisibility=function(){var t=this;this.SI.forEach((function(n,i){2===n.relativePos?n.isVisible()&&n.setVisibility(kt):3!==n.relativePos&&(n.isVisible()||n.setVisibility(xt),t.uct(i),t.sct(i))})),this.SI.some((function(t){return t.isVisible()}))||this.Bst.setVisibility(xt),this.SI.filter((function(t){return t.isVisible()})).forEach((function(n){return t.toggleHiddenAndReplaceableElements(W(n.document))}));var n=function(t,n){for(var i=0;i<t.length;i++)if(t[i].isVisible())return i;return-1}(this.SI),i=this.SI[n]||null;i&&this.Jst!==i&&this.setTitlePage(i),this.maybeFetchNext()},n.uct=function(t,n){var i=void 0===n?5:n;this.Zst.isScrollingDown()&&this.Bst.isVisible()&&this.Bst.setVisibility(kt);var r=this.Zst.isScrollingDown()?this.SI.slice(1,t).reverse():this.SI.slice(t+1);return Promise.all(r.filter((function(t){return 2===t.relativePos})).map((function(t,n){if(t.isVisible()&&t.setVisibility(kt),n>=i)return t.pause()})))},n.sct=function(t,n){var i=void 0===n?5:n,r=this.SI.slice(1).slice(Math.max(0,t-i-1),Math.min(this.SI.length,t+i+1)).filter((function(t){return t.is(6)}));return Promise.all(r.map((function(t){return t.resume()})))},n.setLastFetchedPage=function(t){this.qst=t},n.setTitlePage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.Bst;if(t){var n=t.title,i=t.url;this.tp.title=n,this.xu.replace({title:n,url:i}),this.Jst=t,Pt(this.Gst(),"amp-next-page-scroll",{"title":n,"url":i},!1)}else J().warn(Mn,"setTitlePage called before next-page-service is built")},n.createHostPage=function(){var t,n,i,r=this.tp,e=r.location,o=r.title,u=e.href,s=function(t){var n=t.querySelector('script[type="application/ld+json"]');if(n){var i=g(n.textContent);if(i&&i.image)return"string"==typeof i.image?i.image:i.image["@list"]&&"string"==typeof i.image["@list"][0]?i.image["@list"][0]:"string"==typeof i.image.url?i.image.url:"string"==typeof i.image[0]?i.image[0]:void 0}}(this.tp)||((t=this.tp.querySelector('meta[property="og:image"]'))?t.getAttribute("content"):void 0)||(n=this.tp,(i=n.querySelector('link[rel="shortcut icon"]')||n.querySelector('link[rel="icon"]'))?i.getAttribute("href"):void 0)||"";return new qt(this,{url:u,title:o||"",image:s},5,xt,this.tp)},n.createDocumentContainerForPage=function(t){var n=this,i=this.tp.createElement("div");i.classList.add("i-amphtml-next-page-document-container"),this.Vst.insertBefore(i,this.$st);var r=this.tp.createElement("div");return r.classList.add(zn),i.appendChild(r),this.Zst.observe(r,i,(function(i){t.relativePos=i,n.updateVisibility()})),i},n.act=function(){return this.fo.hasCapability("cid")?"cid":null},n.attachDocumentToPage=function(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.ict()<1&&!i)return Promise.resolve(null);var r=t.container,e=O(r,"> .".concat(S(zn)));if(!e){W(t.is(6));var o=O(r,"> .".concat(S($n)));(e=this.tp.createElement("div")).classList.add(zn),r.replaceChild(e,o)}this.sanitizeDoc(n);try{var u=this.Gat.attachShadowDoc(e,n,t.url,{visibilityState:wt,cap:this.act()}),s=this.fo.maybeGetMessageDeliverer();s&&u.onMessage((function(t,n,i){if("documentHeight"!==t&&"scroll"!==t&&"viewport"!==t)return s(t,n,i)}));var a=W(u.ampdoc);gn(a,nn,null,!1,Mn);var c=a.getBody();c.classList.add(Un);var h=this.$at.cloneNode(!0);T(r,h);var f=this.cct(h,t);return f.then((function(){return u}))}catch(t){return J().error(Mn,"failed to attach shadow document for page",t),Promise.resolve(null)}},n.closeDocument=function(t){if(t.is(6))return F();var n=t.container,i=O(n,"> .".concat(S(zn))),r=this.tp.createElement("div");r.classList.add($n);var e=0,o=0;return this.Ea.measureMutateElement(i,(function(){e=i.offsetHeight,o=i.offsetWidth}),(function(){!function(t,n){for(var i in n)Et(t,i,n[i])}(r,{"height":"".concat(e,"px"),"width":"".concat(o,"px")}),n.replaceChild(r,i)}))},n.sanitizeDoc=function(t){var n=this;s(t.querySelectorAll("amp-next-page")).forEach((function(t){if(n.Yst){var i=n.hct(t);n.fct(i)}N(t)})),t.body.classList.add(Vt),this.toggleHiddenAndReplaceableElements(t,!1)},n.toggleHiddenAndReplaceableElements=function(t){var n=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t!==this.Bst.document&&s(t.querySelectorAll("[next-page-hide]")).forEach((function(t){return Ot(t,!1)})),i&&s(t.querySelectorAll("*:not(amp-next-page) [next-page-replace]")).forEach((function(t){var i=t.getAttribute("next-page-replace");i||(i=String(Date.now()+Math.floor(100*Math.random())),t.setAttribute("next-page-replace",i)),n.Wst[i]&&n.Wst[i]!==t&&Ot(n.Wst[i],!1),n.Wst[i]=t,Ot(t,!0)}))},n.ict=function(){return Math.round((this.Iu.getScrollHeight()-this.Iu.getScrollTop()-this.Iu.getHeight())/this.Iu.getHeight())},n.rct=function(t){return this.SI.indexOf(t)},n.fetchPageDocument=function(t){var n=this;return yt(this.t).fetch(t.url,{ampCors:!1}).then((function(i){return tn(i.url,n.Ki.getUrl()),t.url=i.url,i.text()})).then((function(t){var i=n.tp.implementation.createHTMLDocument("");return i.open(),i.write(t),i.close(),i})).catch((function(n){throw q().error(Mn,"failed to fetch %s",t.url,n),n}))},n.nct=function(){var t=this,n=this.hct(this.Gst());return n.length?this.fct(n):(Y(this.Kst,"%s should contain a <script> child or a URL specified in [src]",Mn),this.ect().then((function(n){return 0===n.length?(q().warn(Mn,"Could not find recommendations"),F()):t.fct(n)})))},n.oct=function(t){var n=this;return!t.length||this.Hst||t.forEach((function(t){try{if(function(t,n){q().assertString(t.url,"page url must be a string");var i,r,e=Qt(n),o=Ft(n).origin;t.url=(i=t.url,r=Yt(r=e),"function"==typeof URL?new URL(i,r.href).toString():function(t,n){n=Yt(n);var i=Ft(t=t.replace(/\\/g,"/"));return t.toLowerCase().startsWith(i.protocol)?i.href:t.startsWith("//")?n.protocol+t:t.startsWith("/")?n.origin+t:n.origin+n.pathname.replace(/\/[^/]*$/,"/")+t}(i,r));var u=tn(t.url,n);q().assertString(t.image,"page image must be a string"),q().assertString(t.title,"page title must be a string");var s=Xt(n);s!==o&&u.origin===s&&(t.url="".concat(o,"/c/")+("https:"===u.protocol?"s/":"")+encodeURIComponent(u.host)+u.pathname+(u.search||"")+(u.hash||""))}(t,n.Ki.getUrl()),n.SI.some((function(n){return n.initialUrl==t.url})))return;n.SI.push(new Zt(n,t))}catch(t){q().error(Mn,"Failed to queue page due to error:",t)}})),F()},n.fct=function(t){var n=this;return this.oct(t).then((function(){return n.maybeFetchNext()}))},n.hct=function(t){var n=I(t,"SCRIPT");if(!n.length)return[];Y(1===n.length,"".concat(Mn," should contain at most one <script> child"));var i=n[0];Y(function(t){var n;return"SCRIPT"==t.tagName&&"APPLICATION/JSON"==(null===(n=t.getAttribute("type"))||void 0===n?void 0:n.toUpperCase())}(i),"".concat(Mn," page list should ")+'be inside a <script> tag with type="application/json"');var r=g(i.textContent,(function(t){q().error(Mn,"failed to parse inline page list",t)})),o=q().assertArray(r,"".concat(Mn," Page list expected an array, found: ").concat(e(r)));return N(i),o},n.ect=function(){var t=this;return this.Kst?(this._st||(this._st=function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.expr,e=void 0===r?".":r,o=i.refresh,u=void 0!==o&&o,s=i.url,a=void 0===s?n.getAttribute("src"):s,c=i.urlReplacement,h=void 0===c?0:c,f=i.xssiPrefix,l=void 0===f?void 0:f;Gt(a,n);var v=vt(t.win);return rn(n,a,h,u).then((function(t){return v.fetchJson(t.xhrUrl,t.fetchOpt)})).then((function(n){return yt(t.win).xssiJson(n,l)})).then((function(t){if(null==t)throw new Error("Response is undefined.");return d(t,e||".")})).catch((function(t){throw q().createError("failed fetching JSON data",t)}))}(this.Ki,this.Gst(),{urlReplacement:2,xssiPrefix:this.Gst().getAttribute("xssi-prefix")||void 0}).then((function(n){return t.Kst=n.next||null,t.Kst&&t.Gst().setAttribute("src",t.Kst),n.pages||[]})).catch((function(n){return q().error(Mn,"error fetching page list from remote server",n),t.Kst=null,[]}))),this._st):Promise.resolve([])},n.Qst=function(t){var n=P(t,"separator");return n?(N(n),n.hasAttribute("tabindex")||n.setAttribute("tabindex","0"),n):this.lct()},n.lct=function(){return Rt(this.Gst())(Tn)},n.cct=function(t,n){var i=this;if(!this.tS.hasTemplate(t))return F();var r={title:n.title,url:n.url,image:n.image};return this.tS.findAndRenderTemplate(t,r).then((function(n){return i.Ea.mutateElement(t,(function(){A(t),t.appendChild(n)}))}))},n.Xst=function(t){var n=this,i=P(t,"recommendation-box");return i?(this.Dst=this.tS.hasTemplate(i)?function(){return n.vct()}:Dn,i):(this.Dst=function(){return n.pct()},this.dct())},n.dct=function(){return Rt(this.Gst())(Ln)},n.vct=function(){var t=this,n=this.$st;W(this.tS.hasTemplate(n));var i=this.tS.maybeFindTemplate(n),r={pages:(this.SI||[]).filter((function(t){return!t.isLoaded()&&!t.is(2)})).map((function(t){return{title:t.title,url:t.url,image:t.image}}))};return this.tS.findAndRenderTemplate(n,r).then((function(r){return t.Ea.mutateElement(n,(function(){A(n),n.appendChild(i),n.appendChild(r)}))}))},n.pct=function(){var t=this,n=this.$st,i={pages:(this.SI||[]).filter((function(t){return!t.isLoaded()&&!t.is(2)})).map((function(t){return{title:t.title,url:t.url,image:t.image}}))},r=Rt(this.Gst()),e=i.pages.map((function(n){var i=r(Cn),e=function(t){for(var n=t.querySelectorAll("[ref]"),i=v(),r=0;r<n.length;r++){var e=n[r],o=e.getAttribute("ref");m(o),e.removeAttribute("ref"),m(void 0===i[o]),i[o]=e}return i}(i),o=e.image,u=e.title;return o.src=n.image,u.textContent=n.title,i.href=n.url,i.addEventListener("click",(function(i){Pt(t.Gst(),"amp-next-page-click",{"title":n.title,"url":n.url},!1),t._R.navigateToAmpUrl(n.url,"content-discovery")&&i.preventDefault()})),i}));return this.Ea.mutateElement(n,(function(){A(n),e.forEach((function(t){return n.appendChild(t)}))}))},t}(),_n=function(t){i(r,t);var n=u(r);function r(t){var i;return(i=n.call(this,t)).mct=null,i}var e=r.prototype;return e.isLayoutSupported=function(t){return"container"===t},e.buildCallback=function(){return this.mct=Q(this.element,"next-page"),this.mct.build(this.element)},r}(t.BaseElement);t.registerServiceForDoc("next-page",Hn),t.registerElement("amp-next-page",_n,nn)}();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
/**
* @license
* Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
* Use of this source code is governed by a BSD-style
* license that can be found in the LICENSE file or at
* https://developers.google.com/open-source/licenses/bsd
*/}});
//# sourceMappingURL=amp-next-page-1.0.js.map