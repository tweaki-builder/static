name: Clone Website
on:
Â Â workflow_dispatch:
Â Â Â Â inputs:
Â Â Â Â Â Â url:
Â Â Â Â Â Â Â Â description: 'URL to clone (e.g., https://html.awaikenthemes.com/inspaire/index.html)'
Â Â Â Â Â Â Â Â required: true
Â Â Â Â Â Â Â Â type: string
Â Â Â Â Â Â directory:
Â Â Â Â Â Â Â Â description: 'Output folder name (e.g., inspaire-clone)'
Â Â Â Â Â Â Â Â required: true
Â Â Â Â Â Â Â Â type: string
Â Â Â Â Â Â Â Â default: cloned-site
jobs:
Â Â clone-and-push:
Â Â Â Â runs-on: ubuntu-latest
Â Â Â Â # Add write permissions for the default GITHUB_TOKEN
Â Â Â Â permissions:
Â Â Â Â Â Â contents: write
Â Â Â Â steps:
Â Â Â Â Â Â - name: Checkout repository
Â Â Â Â Â Â Â Â uses: actions/checkout@v4
Â Â Â Â Â Â Â Â with:
Â Â Â Â Â Â Â Â Â Â # Fetch full history so we can push safely
Â Â Â Â Â Â Â Â Â Â fetch-depth: 0
Â Â Â Â Â Â - name: Setup Node.js
Â Â Â Â Â Â Â Â uses: actions/setup-node@v4
Â Â Â Â Â Â Â Â with:
Â Â Â Â Â Â Â Â Â Â node-version: '24'
Â Â Â Â Â Â - name: Install dependencies
Â Â Â Â Â Â Â Â run: |
Â Â Â Â Â Â Â Â Â Â npm init -y
Â Â Â Â Â Â Â Â Â Â npm install website-scraper website-scraper-puppeteer
Â Â Â Â Â Â - name: Create cloning script
Â Â Â Â Â Â Â Â run: |
Â Â Â Â Â Â Â Â Â Â cat > index.js << 'EOF'
Â Â Â Â Â Â Â Â Â Â const scrape = require('website-scraper').default;
Â Â Â Â Â Â Â Â Â Â const PuppeteerPlugin = require('website-scraper-puppeteer').default;
Â Â Â Â Â Â Â Â Â Â const path = require('path');
Â Â Â Â Â Â Â Â Â Â const fs = require('fs');
Â Â Â Â Â Â Â Â Â Â (async () => {
Â Â Â Â Â Â Â Â Â Â Â Â const url = process.argv[2];
Â Â Â Â Â Â Â Â Â Â Â Â const dirName = process.argv[3];
Â Â Â Â Â Â Â Â Â Â Â Â if (!url || !dirName) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â console.error('âŒ Usage: node index.js <url> <directory>');
Â Â Â Â Â Â Â Â Â Â Â Â Â Â process.exit(1);
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â const directory = path.resolve(__dirname, dirName);
Â Â Â Â Â Â Â Â Â Â Â Â // Remove existing folder if present
Â Â Â Â Â Â Â Â Â Â Â Â if (fs.existsSync(directory)) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â console.log(ğŸ—‘ï¸ Removing existing folder '${dirName}'...);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â fs.rmSync(directory, { recursive: true, force: true });
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â try {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â console.log(ğŸ”„ Cloning ${url} into folder '${dirName}' ...);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â await scrape({
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â urls: [url],
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â directory: directory,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â plugins: [
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â new PuppeteerPlugin({
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â launchOptions: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â headless: true,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â args: ['--no-sandbox', '--disable-setuid-sandbox']
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â scrollToBottom: {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â timeout: 10000,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â viewportN: 10
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â })
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ]
Â Â Â Â Â Â Â Â Â Â Â Â Â Â });
Â Â Â Â Â Â Â Â Â Â Â Â Â Â console.log('âœ… Website cloned successfully!');
Â Â Â Â Â Â Â Â Â Â Â Â } catch (err) {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â console.error('âŒ Cloning failed:', err.message || err);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â process.exit(1);
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â })();
Â Â Â Â Â Â Â Â Â Â EOF
Â Â Â Â Â Â - name: Run cloning script
Â Â Â Â Â Â Â Â env:
Â Â Â Â Â Â Â Â Â Â INPUT_URL: ${{ inputs.url }}
Â Â Â Â Â Â Â Â Â Â OUTPUT_DIR: ${{ inputs.directory }}
Â Â Â Â Â Â Â Â run: |
Â Â Â Â Â Â Â Â Â Â node index.js "$INPUT_URL" "$OUTPUT_DIR"
Â Â Â Â Â Â - name: Commit and push cloned folder to main branch
Â Â Â Â Â Â Â Â run: |
Â Â Â Â Â Â Â Â Â Â git config user.name "github-actions[bot]"
Â Â Â Â Â Â Â Â Â Â git config user.email "github-actions[bot]@users.noreply.github.com"
Â Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â Â Â git add "${{ inputs.directory }}"
Â Â Â Â Â Â Â Â Â Â git commit -m "Add cloned site: ${{ inputs.directory }} from ${{ inputs.url }}" || echo "No changes to commit"
Â Â Â Â Â Â Â Â Â Â git push origin HEAD:main
